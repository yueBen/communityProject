<link rel="stylesheet" href="../../css/tool/modelCss.css">
<link rel="stylesheet" href="../../layui/css/layui.css" media="all"/>

<style type="text/css">

    .update{
        width: 600px;
        height: 775px;
        border-radius: 30px;
        background: rgba(105,105,105,0.9);
        text-align: center;
        padding: 25px 0 0 0;
    }

    .update-item{
        width: 60%;
        height: 60px;
        line-height: 60px;
        text-align: center;
        margin: 0 10% 10px 10%;
        padding: 0 10%;
        font-size: 24px;
        font-weight: bold;
        font-family: 楷体;
        color: #FFFFFF;
    }
    .update-item>textarea{
        background: rgba(25,255,255,0.1);
        border: 1px solid #FFFFFF;
        width: 240px;
        height: 120px;
        padding: 10px;
        border-radius: 20px;
        font-weight: 100;
        font-size: 20px;
        color: #FFFFFF;
        overflow: scroll;
    }
    .update-item>textarea::-webkit-scrollbar{
        display: none;
    }
    .update-item>textarea::placeholder{
        color: #cee0ff;
    }
    .update-item>input{
        width: 240px;
        height: 40px;
        border: 1px solid #FFFFFF;
        border-radius: 20px;
        background: rgba(25,255,255,0.1);
        text-align: center;
        color: #feffc1;
    }
    .update-item>input::placeholder{
        color: #cee0ff;
    }
    .update-item>select{
        width: 80px;
        height: 40px;
        border: 1px solid #FFFFFF;
        border-radius: 20px;
        background: rgba(25,255,255,0.1);
        color: #feffc1;
    }
    .update-item>select>option{
        background: rgba(25,255,255,0.1);
        color: #00557d;
    }

    .photo>img{
        width: 100px;
        height: 100px;
        border-radius: 50%;
        margin: 0 auto;
    }
    .btn{
        border: 1px solid #FFFFFF;
        color: #FFFFFF;
    }

</style>

<div class="update">
    <form id="info">
        <input style="display: none" value="34e1aaadd681494c93a2ac278c23b1b8" name="id">
        <input style="display: none" value="1" name="uid">
        <div class="update-item">
            <input type="text" value="" name="name" placeholder="姓名">
        </div>
        <div class="update-item">
            <input type="text" value="" name="phone" placeholder="电话">
        </div>
        <div class="update-item">
            <input type="text" value="" name="birthday" id="birthday" placeholder="请选择日期" readonly>
        </div>
        <div class="update-item">
            <input type="text" value="" name="address" placeholder="地址">
        </div>
        <div class="update-item">
            性别：<select name="gender">
            <option value="男" disabled selected>男</option>
            <option value="女">女</option>
        </select>
        </div>
        <div class="update-item" style="height: 120px;">
            <textarea maxlength="84" name="introduce" placeholder="简介："></textarea>
        </div>
        <div class="update-item photo" style="height: 170px;text-align: center;">
            <img id="photoShow" src="../../img/6.jpg" style="display: block">
            <input type="file" style="width: 100%;height: 10px;visibility: hidden" id="photoUpload-hidden" name="photo" accept="image/*">
            <div class="modelBtn1 btn" style="width: 220px;margin: 0 auto" id="photoUpload">上传头像</div>
        </div>
    </form>
    <div class="update-item" style="text-align: center">
        <div class="modelBtn1 btn">取消</div>
        <div class="modelBtn2" style="background: rgba(245,245,245,0.6);
            color: #494118;margin: 0 0 0 40px">保存</div>
    </div>
</div>

<script src="../../layui/layui.all.js"></script>
<script src="../../js/jquery-3.3.1.min.js"></script>
<script src="../../js/tool/config.js"></script>
<script type="text/javascript">
    layui.use(["laydate","layer"],function () {
        var laydate = layui.laydate,
            layer = layui.layer;

        //头像上传按钮
        $("#photoUpload").click(function () {
            $("#photoUpload-hidden").click();
        });

        //个人信息上传
        $(".modelBtn2").click(function () {
            console.log("info_upload");
            var formDate = new FormData($("#info")[0]);
            $.ajax({
                type: "post",
                url: personPath + "add",
                data: formDate,
                async: false,
                cache: false,
                processData: false,
                contentType: false,
                success: function (rep) {
                    if (rep.ok) {
                        layer.msg("修改成功", {
                            time: 1000
                        }, function () {

                        });
                    }
                },
                error: function (err) {
                    console.log(err)
                }
            });
        });

        //头像选择回显
        $("#photoUpload-hidden").change(function () {
            var fr = new FileReader();
            fr.readAsDataURL(this.files[0]);
            fr.onloadend = function () {
                $("#photoShow").attr("src", this.result)
            }
            console.log("222");
        });

        //时间选择
        laydate.render({
            elem: '#birthday'
        })
    });

    
</script>